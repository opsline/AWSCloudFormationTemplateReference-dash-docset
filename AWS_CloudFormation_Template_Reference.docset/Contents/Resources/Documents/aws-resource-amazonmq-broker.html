<!DOCTYPE html>
<html>
<head>
    <link href="css/awsdocs.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/awsdocs.min.js"></script>
    <meta charset="utf-8">
</head>
<body>
    <div id="content" style="padding: 10px 30px;">
    <h1 class="topictitle" id="aws-resource-amazonmq-broker">AWS::AmazonMQ::Broker</h1><p>A <em>broker</em> is a message broker environment running on
                        Amazon MQ. It is the basic building block of Amazon MQ.
                     </p><p>The <code class="code">AWS::AmazonMQ::Broker</code> resource lets you create Amazon MQ brokers, add
                        configuration changes or modify users for the specified broker, return information
                        about the
                        specified broker, and delete the specified broker. For more information, see <a href="https://docs.aws.amazon.com/amazon-mq/latest/developer-guide/amazon-mq-basic-elements.html" target="_blank">Amazon MQ Basic Elements</a> in the
                        <em>Amazon MQ Developer Guide</em>.
                     </p><div class="highlights" id="inline-topiclist">
                        <p><strong>Topics</strong></p>
                        <ul>
                           <li><a href="#aws-resource-amazonmq-broker-syntax">Syntax</a></li>
                           <li><a href="#aws-resource-amazonmq-broker-properties">Properties</a></li>
                           <li><a href="#aws-resource-amazonmq-broker-returnvalues">Return Values</a></li>
                           <li><a href="#aws-resource-amazonmq-broker-examples">Examples</a></li>
                        </ul>
                     </div><h2 id="aws-resource-amazonmq-broker-syntax">Syntax</h2><p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p><div id="JSON" name="JSON" class="section langfilter">
                        
                        <h3 id="aws-resource-amazonmq-broker-syntax.json">JSON</h3>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;Type&quot; : &quot;AWS::AmazonMQ::Broker&quot;,
  &quot;Properties&quot; : {
    &quot;<a href="aws-resource-amazonmq-broker.html#cfn-amazonmq-broker-autominorversionupgrade">AutoMinorVersionUpgrade</a>&quot; : <em class="replaceable"><code>Boolean</code></em>,
    &quot;<a href="aws-resource-amazonmq-broker.html#cfn-amazonmq-broker-brokername">BrokerName</a>&quot; : <em class="replaceable"><code>String</code></em>,  
    &quot;<a href="aws-resource-amazonmq-broker.html#cfn-amazonmq-broker-users">Users</a>&quot; : [ <a href="aws-properties-amazonmq-broker-user.html">User</a>, ... ],
    &quot;<a href="aws-resource-amazonmq-broker.html#cfn-amazonmq-broker-configuration">Configuration</a>&quot; : <a href="aws-properties-amazonmq-broker-configurationid.html">ConfigurationId</a>,
    &quot;<a href="aws-resource-amazonmq-broker.html#cfn-amazonmq-broker-deploymentmode">DeploymentMode</a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-amazonmq-broker.html#cfn-amazonmq-broker-enginetype">EngineType</a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-amazonmq-broker.html#cfn-amazonmq-broker-engineversion">EngineVersion</a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-amazonmq-broker.html#cfn-amazonmq-broker-hostinstancetype">HostInstanceType</a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-amazonmq-broker.html#cfn-amazonmq-broker-logs">Logs</a>&quot; : <a href="aws-properties-amazonmq-broker-logsconfiguration.html">LogsConfiguration</a>,
    &quot;<a href="aws-resource-amazonmq-broker.html#cfn-amazonmq-broker-maintenancewindowstarttime">MaintenanceWindowStartTime</a>&quot; : <a href="aws-properties-amazonmq-broker-maintenancewindow.html">MaintenanceWindow</a>,
    &quot;<a href="aws-resource-amazonmq-broker.html#cfn-amazonmq-broker-publiclyaccessible">PubliclyAccessible</a>&quot; : <em class="replaceable"><code>Boolean</code></em>,
    &quot;<a href="aws-resource-amazonmq-broker.html#cfn-amazonmq-broker-securitygroups">SecurityGroups</a>&quot; : [ <em class="replaceable"><code>String</code></em>, ... ],
    &quot;<a href="aws-resource-amazonmq-broker.html#cfn-amazonmq-broker-subnetids">SubnetIds</a>&quot; : [ <em class="replaceable"><code>String</code></em>, ... ]
  }
}</code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        
                        <h3 id="aws-resource-amazonmq-broker-syntax.yaml">YAML</h3>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="yaml ">Type: &quot;AWS::AmazonMQ::Broker&quot;
Properties:
  <a href="aws-resource-amazonmq-broker.html#cfn-amazonmq-broker-autominorversionupgrade">AutoMinorVersionUpgrade</a>: <em class="replaceable"><code>Boolean</code></em>
  <a href="aws-resource-amazonmq-broker.html#cfn-amazonmq-broker-brokername">BrokerName</a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-amazonmq-broker.html#cfn-amazonmq-broker-users">Users</a>: 
    - <a href="aws-properties-amazonmq-broker-user.html">User</a>
  <a href="aws-resource-amazonmq-broker.html#cfn-amazonmq-broker-configuration">Configuration</a>: <a href="aws-properties-amazonmq-broker-configurationid.html">ConfigurationId</a>
  <a href="aws-resource-amazonmq-broker.html#cfn-amazonmq-broker-deploymentmode">DeploymentMode</a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-amazonmq-broker.html#cfn-amazonmq-broker-enginetype">EngineType</a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-amazonmq-broker.html#cfn-amazonmq-broker-engineversion">EngineVersion</a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-amazonmq-broker.html#cfn-amazonmq-broker-hostinstancetype">HostInstanceType</a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-amazonmq-broker.html#cfn-amazonmq-broker-logs">Logs</a>: <a href="aws-properties-amazonmq-broker-logsconfiguration.html">LogsConfiguration</a>
  <a href="aws-resource-amazonmq-broker.html#cfn-amazonmq-broker-maintenancewindowstarttime">MaintenanceWindowStartTime</a>: <a href="aws-properties-amazonmq-broker-maintenancewindow.html">MaintenanceWindow</a>
  <a href="aws-resource-amazonmq-broker.html#cfn-amazonmq-broker-publiclyaccessible">PubliclyAccessible</a>: <em class="replaceable"><code>Boolean</code></em>              
  <a href="aws-resource-amazonmq-broker.html#cfn-amazonmq-broker-securitygroups">SecurityGroups</a>: 
    - <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-amazonmq-broker.html#cfn-amazonmq-broker-subnetids">SubnetIds</a>: 
    - <em class="replaceable"><code>String</code></em></code></pre>
                        </div><h2 id="aws-resource-amazonmq-broker-properties">Properties</h2><div class="variablelist">
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <dl>
                           
                           <dt><a id="cfn-amazonmq-broker-autominorversionupgrade"></a><span class="term"><code class="code">AutoMinorVersionUpgrade</code></span></dt>
                           
                           <dd>
                              
                              <p>Enables automatic upgrades to new minor versions for brokers, as Apache releases the
                                 versions. The automatic upgrades occur during the maintenance window of the broker
                                 or
                                 after a manual broker reboot.
                              </p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              
                              <p><em>Type</em>: Boolean
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-amazonmq-broker-brokername"></a><span class="term"><code class="code">BrokerName</code></span></dt>
                           
                           <dd>
                              
                              <p>The name of the broker. This value must be unique in your AWS account, 1-50
                                 characters long, must contain only letters, numbers, dashes, and underscores, and
                                 must
                                 not contain whitespaces, brackets, wildcard characters, or special characters.
                              </p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a> 
                              </p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-amazonmq-broker-users"></a><span class="term"><code class="code">Users</code></span></dt>
                           
                           <dd>
                              
                              <p>The list of all ActiveMQ usernames for the specified broker.</p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              
                              <p><em>Type</em>: List of <a href="aws-properties-amazonmq-broker-user.html">Amazon MQ Broker User</a> property types
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-some-interrupt">Some interruptions</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-amazonmq-broker-configuration"></a><span class="term"><code class="code">Configuration</code></span></dt>
                           
                           <dd>
                              
                              <p>The broker configuration. If no configuration exists for a broker, Amazon MQ
                                 creates a default configuration.
                              </p>
                              
                              <div class="aws-note">
                                 <p class="aws-note">Note</p>
                                 <p>You can use AWS CloudFormation to modify&#x2014;but not delete&#x2014;an Amazon MQ configuration.</p>
                              </div>
                              
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: <a href="aws-properties-amazonmq-broker-configurationid.html">Amazon MQ Broker ConfigurationId</a></p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-some-interrupt">Some interruptions</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-amazonmq-broker-deploymentmode"></a><span class="term"><code class="code">DeploymentMode</code></span></dt>
                           
                           <dd>
                              
                              <p>The deployment mode of the broker. <code class="code">SINGLE_INSTANCE</code> creates a
                                 single-instance broker in a single Availability Zone.
                                 <code class="code">ACTIVE_STANDBY_MULTI_AZ</code> creates an active/standby broker for high
                                 availability. 
                              </p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-amazonmq-broker-enginetype"></a><span class="term"><code class="code">EngineType</code></span></dt>
                           
                           <dd>
                              
                              <p>The type of broker engine.</p>
                              
                              <div class="aws-note">
                                 <p class="aws-note">Note</p>
                                 <p>Currently, Amazon MQ supports only <code class="code">ACTIVEMQ</code>.
                                 </p>
                              </div>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-amazonmq-broker-engineversion"></a><span class="term"><code class="code">EngineVersion</code></span></dt>
                           
                           <dd>
                              
                              <p>The version of the broker engine.</p>
                              
                              <div class="aws-note">
                                 <p class="aws-note">Note</p>
                                 <p>Currently, Amazon MQ supports only <code class="code">5.15.0</code>.
                                 </p>
                              </div>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-amazonmq-broker-hostinstancetype"></a><span class="term"><code class="code">HostInstanceType</code></span></dt>
                           
                           <dd>
                              
                              <p>The broker&apos;s instance type. For more information, see <a href="https://docs.aws.amazon.com/amazon-mq/latest/developer-guide/broker.html#broker-instance-types" target="_blank">Instance Types</a> in the
                                 <em>Amazon MQ Developer Guide</em>.
                              </p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-amazonmq-broker-logs"></a><span class="term"><code class="code">Logs</code></span></dt>
                           
                           <dd>
                              
                              <p>The Amazon CloudWatch Logs configuration for the broker.</p>              
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: <a href="aws-properties-amazonmq-broker-logsconfiguration.html">Amazon MQ Broker
                                    LogsConfiguration</a></p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-some-interrupt">Some interruptions</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-amazonmq-broker-maintenancewindowstarttime"></a><span class="term"><code class="code">MaintenanceWindowStartTime</code></span></dt>
                           
                           <dd>
                              
                              <p>The parameters that determine the <code class="code">WeeklyStartTime</code>.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: <a href="aws-properties-amazonmq-broker-maintenancewindow.html">Amazon MQ Broker MaintenanceWindow</a></p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-amazonmq-broker-publiclyaccessible"></a><span class="term"><code class="code">PubliclyAccessible</code></span></dt>
                           
                           <dd>
                              
                              <p>Enables connections from applications outside of the VPC that hosts the broker&apos;s
                                 subnets.
                              </p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              
                              <p><em>Type</em>: Boolean
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-amazonmq-broker-securitygroups"></a><span class="term"><code class="code">SecurityGroups</code></span></dt>
                           
                           <dd>
                              
                              <p>The list of rules (1 minimum, 125 maximum) that authorize connections to
                                 brokers.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: List of String values
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-amazonmq-broker-subnetids"></a><span class="term"><code class="code">SubnetIds</code></span></dt>
                           
                           <dd>
                              
                              <p>The list of groups (2 maximum) that define which subnets and IP ranges the broker
                                 can use from different Availability Zones. A <code class="code">SINGLE_INSTANCE</code>  deployment
                                 requires one subnet (for example, the default subnet). An
                                 <code class="code">ACTIVE_STANDBY_MULTI_AZ</code> deployment requires two subnets. 
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: List of String values
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                        </dl>
                     </div><h2 id="aws-resource-amazonmq-broker-returnvalues">Return Values</h2><h3 id="aws-resource-amazonmq-broker-ref">Ref</h3><p>When you pass the logical ID of an <code class="code">AWS::AmazonMQ::Broker</code> resource to
                        the intrinsic <code class="code">Ref</code> function, the function returns the Amazon MQ broker ID. For
                        example:
                     </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">b-1234a5b6-78cd-901e-2fgh-3i45j6k178l9</code></pre><p>For more information about using the <code class="code">Ref</code> function, see <code class="code"><a href="intrinsic-function-reference-ref.html">Ref</a></code>.
                     </p><h3 id="aws-resource-amazonmq-broker-getatt">Fn::GetAtt</h3><p>
                        <code class="code">Fn::GetAtt</code> returns a value for a specified attribute of this type. The following are the available
                        attributes and sample return values.
                        
                     </p><div class="variablelist">
                        
                        
                        
                        
                        
                        <dl>
                           
                           <dt><span class="term"><code class="code">Arn</code></span></dt>
                           
                           <dd>
                              
                              <p>The Amazon Resource Name (ARN) of the Amazon MQ broker.</p>
                              <pre class="programlisting"><div class="code-btn-container"><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">arn:aws:mq:us-east-2:123456789012:broker:MyBroker:b-1234a5b6-78cd-901e-2fgh-3i45j6k178l9</code></pre>
                              </dd>
                           
                           
                           <dt><span class="term"><code class="code">ConfigurationId</code></span></dt>
                           
                           <dd>
                              
                              <p>The unique ID that Amazon MQ generates for the configuration.</p>
                              <pre class="programlisting"><div class="code-btn-container"><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">c-1234a5b6-78cd-901e-2fgh-3i45j6k178l9</code></pre>
                              </dd>
                           
                           
                           <dt><span class="term"><code class="code">ConfigurationRevision</code></span></dt>
                           
                           <dd>
                              
                              <p>The revision number of the configuration.</p>
                              <pre class="programlisting"><div class="code-btn-container"><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">1</code></pre>
                              </dd>
                           
                        </dl>
                     </div><p>For more information about using <code class="code">Fn::GetAtt</code>, see <code class="code"><a href="intrinsic-function-reference-getatt.html">Fn::GetAtt</a></code>.
                     </p><h2 id="aws-resource-amazonmq-broker-examples">Examples</h2><h3 id="aws-resource-amazonmq-broker-example-simple">Basic Amazon MQ Broker</h3><p>The following example creates a basic Amazon MQ broker with one user that belongs
                        to a
                        group.
                     </p><div class="aws-note">
                        <p class="aws-note">Note</p>
                        <p>We don&apos;t recommend including plaintext passwords in AWS CloudFormation templates.
                           To securely retrieve your user credentials, add a <code class="code">Ref</code> to your template.
                           For example, you can create a Lambda function and use it to retrieve encrypted credentials
                           stored in a DynamoDB table.
                           For more information, see <a href="https://docs.aws.amazon.com/lambda/latest/dg/with-ddb.html" target="_blank">Using AWS Lambda with Amazon DynamoDB</a> 
                           in the <em>AWS Lambda Developer Guide</em>.
                        </p>
                     </div><div id="JSON" name="JSON" class="section langfilter">
                        
                        <h4 id="aws-resource-amazonmq-broker-example-simple.json">JSON</h4>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;Description&quot;: &quot;Create a basic AmazonMQ broker&quot;,
  &quot;Resources&quot;: {
    &quot;BasicBroker&quot;: {
      &quot;Type&quot;: &quot;AWS::AmazonMQ::Broker&quot;,
      &quot;Properties&quot;: {
        &quot;AutoMinorVersionUpgrade&quot;: &quot;false&quot;,
        &quot;BrokerName&quot;: &quot;MyBasicBroker&quot;,
        &quot;DeploymentMode&quot;: &quot;SINGLE_INSTANCE&quot;,
        &quot;EngineType&quot;: &quot;ActiveMQ&quot;,
        &quot;EngineVersion&quot;: &quot;5.15.0&quot;,
        &quot;HostInstanceType&quot;: &quot;mq.t2.micro&quot;,
        &quot;PubliclyAccessible&quot;: &quot;true&quot;,
        &quot;Users&quot;: [
          {
            &quot;ConsoleAccess&quot;: &quot;true&quot;,
            &quot;Groups&quot;: [
              &quot;MyGroup&quot;
            ],
            &quot;Password&quot; : { &quot;Ref&quot; : &quot;AmazonMqPassword&quot; },
            &quot;Username&quot; : { &quot;Ref&quot; : &quot;AmazonMqUsername&quot; }
          }
        ]
      }
    }
  }
}</code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        
                        <h4 id="aws-resource-amazonmq-broker-example-simple.yaml">YAML</h4>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="yaml ">--- 
Description: &quot;Create a basic AmazonMQ broker&quot;
Resources: 
  BasicBroker:
    Type: &quot;AWS::AmazonMQ::Broker&quot;
    Properties: 
      AutoMinorVersionUpgrade: &quot;false&quot;
      BrokerName: MyBasicBroker
      DeploymentMode: SINGLE_INSTANCE
      EngineType: ActiveMQ
      EngineVersion: &quot;5.15.0&quot;
      HostInstanceType: mq.t2.micro
      PubliclyAccessible: &quot;true&quot;
      Users: 
        - 
          ConsoleAccess: &quot;true&quot;
          Groups: 
            - MyGroup
          Password: 
            Ref: &quot;BrokerPassword&quot;            
          Username: 
            Ref: &quot;BrokerUsername&quot;</code></pre>
                        </div><h3 id="aws-resource-amazonmq-broker-example-complex">Complex Amazon MQ Broker</h3><p>The following example creates a complex Amazon MQ broker with two users that don&apos;t
                        belong to a group and one user that belongs in a group.
                     </p><div class="aws-note">
                        <p class="aws-note">Note</p>
                        <p>We don&apos;t recommend including plaintext passwords in AWS CloudFormation templates.
                           To securely retrieve your user credentials, add a <code class="code">Ref</code> to your template.
                           For example, you can create a Lambda function and use it to retrieve encrypted credentials
                           stored in a DynamoDB table.
                           For more information, see <a href="https://docs.aws.amazon.com/lambda/latest/dg/with-ddb.html" target="_blank">Using AWS Lambda with Amazon DynamoDB</a> 
                           in the <em>AWS Lambda Developer Guide</em>.
                        </p>
                     </div><div id="JSON" name="JSON" class="section langfilter">
                        
                        <h4 id="aws-resource-amazonmq-broker-example-complex.json">JSON</h4>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;Description&quot;: &quot;Create a complex AmazonMQ broker&quot;,
  &quot;Resources&quot;: {
    &quot;ComplexBroker&quot;: {
      &quot;Type&quot;: &quot;AWS::AmazonMQ::Broker&quot;,
      &quot;Properties&quot;: {
        &quot;AutoMinorVersionUpgrade&quot;: &quot;false&quot;,
        &quot;BrokerName&quot;: &quot;MyComplexBroker&quot;,
        &quot;Configuration&quot;: {
          &quot;Id&quot;: { &quot;Ref&quot;: &quot;Configuration1&quot; },
          &quot;Revision&quot; : { &quot;Fn::GetAtt&quot;: [&quot;Configuration1&quot;, &quot;Revision&quot;] }
        },
        &quot;DeploymentMode&quot;: &quot;SINGLE_INSTANCE&quot;,
        &quot;EngineType&quot;: &quot;ActiveMQ&quot;,
        &quot;EngineVersion&quot;: &quot;5.15.0&quot;,
        &quot;HostInstanceType&quot;: &quot;mq.t2.micro&quot;,
        &quot;Logs&quot;: {
            &quot;General&quot;: true,
            &quot;Audit&quot;: false
        },
        &quot;MaintenanceWindowStartTime&quot;: {
          &quot;DayOfWeek&quot;: &quot;Monday&quot;,
          &quot;TimeOfDay&quot;: &quot;22:45&quot;,
          &quot;TimeZone&quot;: &quot;America/Los_Angeles&quot;
        },
        &quot;PubliclyAccessible&quot;: &quot;true&quot;,
        &quot;SecurityGroups&quot;: [
          &quot;sg-a1b234cd&quot;,
          &quot;sg-e5f678gh&quot;
        ],
        &quot;SubnetIds&quot;: [
          &quot;subnet-12a3b45c&quot;,
          &quot;subnet-67d8e90f&quot;
        ],         
        &quot;Users&quot;: [{
          &quot;ConsoleAccess&quot;: &quot;true&quot;,
          &quot;Password&quot; : { &quot;Ref&quot; : &quot;AmazonMqPassword1&quot; },
          &quot;Username&quot; : { &quot;Ref&quot; : &quot;AmazonMqUsername1&quot; }
        }, {
          &quot;Password&quot; : { &quot;Ref&quot; : &quot;AmazonMqPassword2&quot; },
          &quot;Username&quot; : { &quot;Ref&quot; : &quot;AmazonMqUsername2&quot; }
        }, {
          &quot;Groups&quot;: [
            &quot;MyGroup1&quot;,
            &quot;MyGroup2&quot;
          ],
          &quot;Password&quot; : { &quot;Ref&quot; : &quot;AmazonMqPassword3&quot; },          
          &quot;Username&quot; : { &quot;Ref&quot; : &quot;AmazonMqUsername3&quot; }
        }]
      }
    }
  }
}</code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        
                        <h4 id="aws-resource-amazonmq-broker-example-complex.yaml">YAML</h4>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="yaml ">--- 
Description: &quot;Create a complex AmazonMQ broker&quot;
Resources: 
  ComplexBroker:
    Type: &quot;AWS::AmazonMQ::Broker&quot;
    Properties: 
      AutoMinorVersionUpgrade: &quot;false&quot;
      BrokerName: MyComplexBroker
      Configuration: 
        Id: !GetAtt Configuration1.Id
        Revision: !GetAtt Configuration1.Revision
      DeploymentMode: SINGLE_INSTANCE
      EngineType: ActiveMQ
      EngineVersion: &quot;5.15.0&quot;
      HostInstanceType: mq.t2.micro
      Logs:
        General: &quot;true&quot;
        Audit: &quot;false&quot;
      MaintenanceWindowStartTime: 
        DayOfWeek: Monday
        TimeOfDay: &quot;22:45&quot;
        TimeZone: America/Los_Angeles
      PubliclyAccessible: &quot;true&quot;
      SecurityGroups:
        - &quot;sg-a1b234cd&quot;
        - &quot;sg-e5f678gh&quot;
      SubnetIds:
        - &quot;subnet-12a3b45c&quot;
        - &quot;subnet-67d8e90f&quot;
      Users: 
        - 
          ConsoleAccess: &quot;true&quot;
          Password: 
            Ref: &quot;BrokerPassword1&quot;
          Username: 
            Ref: &quot;BrokerUsername1&quot;
        - 
          Password: 
            Ref: &quot;BrokerPassword2&quot;
          Username: 
            Ref: &quot;BrokerUsername2&quot;
        - 
          Groups: 
            - MyGroup1
            - MyGroup2
          Password: 
            Ref: &quot;BrokerPassword3&quot;
          Username: 
            Ref: &quot;BrokerUsername3&quot;</code></pre>
                        </div></div>
</body>
</html>