<!DOCTYPE html>
<html>
<head>
    <link href="css/awsdocs.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/awsdocs.min.js"></script>
    <meta charset="utf-8">
</head>
<body>
    <div id="content" style="padding: 10px 30px;">
    <h1 class="topictitle" id="aws-resource-emr-cluster">AWS::EMR::Cluster</h1><p>The <code class="code">AWS::EMR::Cluster</code> resource creates an Amazon EMR cluster. This cluster is a
                        collection of EC2 instances that you can run big data frameworks on to process and
                        analyze vast
                        amounts of data. For more information, see <a href="https://docs.aws.amazon.com//ElasticMapReduce/latest/ManagementGuide/emr-plan.html" target="_blank">Plan an Amazon EMR
                           Cluster</a> in the <em>Amazon EMR Management Guide</em>.
                     </p><div class="highlights" id="inline-topiclist">
                        <p><strong>Topics</strong></p>
                        <ul>
                           <li><a href="#aws-resource-emr-cluster-syntax">Syntax</a></li>
                           <li><a href="#w2ab1c21c10d679b9">Properties</a></li>
                           <li><a href="#aws-resource-emr-cluster-returnvalues">Return Values</a></li>
                           <li><a href="#aws-resource-emr-cluster-examples">Examples</a></li>
                        </ul>
                     </div><h2 id="aws-resource-emr-cluster-syntax">Syntax</h2><p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p><div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="aws-resource-emr-cluster-syntax.json">JSON</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
  &quot;Type&quot; : &quot;AWS::EMR::Cluster&quot;,
  &quot;Properties&quot; : {
    &quot;<a href="aws-resource-emr-cluster.html#cfn-emr-cluster-additionalinfo">AdditionalInfo</a>&quot; : <em class="replaceable"><code>JSON object</code></em>,
    &quot;<a href="aws-resource-emr-cluster.html#cfn-emr-cluster-applications">Applications</a>&quot; : [ <em class="replaceable"><code>Applications, ...</code></em> ],
    &quot;<a href="aws-resource-emr-cluster.html#cfn-emr-cluster-autoscalingrole">AutoScalingRole</a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-emr-cluster.html#cfn-emr-cluster-bootstrapactions">BootstrapActions</a>&quot; [ <em class="replaceable"><code>Bootstrap Actions, ...</code></em> ],
    &quot;<a href="aws-resource-emr-cluster.html#cfn-emr-cluster-configurations">Configurations</a>&quot; : [ <em class="replaceable"><code>Configurations, ...</code></em> ],
    &quot;<a href="aws-resource-emr-cluster.html#cfn-elasticmapreduce-cluster-customamiid">CustomAmiId</a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-emr-cluster.html#cfn-elasticmapreduce-cluster-ebsrootvolumesize">EbsRootVolumeSize</a>&quot; : <em class="replaceable"><code>Integer</code></em>,
    &quot;<a href="aws-resource-emr-cluster.html#cfn-emr-cluster-instances">Instances</a>&quot; : <em class="replaceable"><code>JobFlowInstancesConfig</code></em>,
    &quot;<a href="aws-resource-emr-cluster.html#cfn-emr-cluster-jobflowrole">JobFlowRole</a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-emr-cluster.html#cfn-elasticmapreduce-cluster-kerberosattributes">KerberosAttributes</a>&quot; : <em class="replaceable"><code><a href="aws-properties-elasticmapreduce-cluster-kerberosattributes.html">Amazon EMR Cluster
            KerberosAttributes</a></code></em>,
    &quot;<a href="aws-resource-emr-cluster.html#cfn-emr-cluster-loguri">LogUri</a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-emr-cluster.html#cfn-emr-cluster-name">Name</a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-emr-cluster.html#cfn-emr-cluster-releaselabel">ReleaseLabel</a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-emr-cluster.html#cfn-emr-cluster-scaledownbehavior">ScaleDownBehavior</a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-emr-cluster.html#cfn-emr-cluster-securityconfiguration">SecurityConfiguration</a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-emr-cluster.html#cfn-emr-cluster-servicerole">ServiceRole</a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-emr-cluster.html#cfn-emr-cluster-tags">Tags</a>&quot; : [ <em class="replaceable"><code>Resource Tag, ...</code></em> ],
    &quot;<a href="aws-resource-emr-cluster.html#cfn-emr-cluster-visibletoallusers">VisibleToAllUsers</a>&quot; : <em class="replaceable"><code>Boolean</code></em>
  }
}</code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="aws-resource-emr-cluster-syntax.yaml">YAML</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">Type: AWS::EMR::Cluster
Properties: 
  <a href="aws-resource-emr-cluster.html#cfn-emr-cluster-additionalinfo">AdditionalInfo</a>: <em class="replaceable"><code>JSON object</code></em>
  <a href="aws-resource-emr-cluster.html#cfn-emr-cluster-applications">Applications</a>:
    - <em class="replaceable"><code>Applications</code></em>
  <a href="aws-resource-emr-cluster.html#cfn-emr-cluster-autoscalingrole">AutoScalingRole</a>: <em class="replaceable"><code>String</code></em>      
  <a href="aws-resource-emr-cluster.html#cfn-emr-cluster-bootstrapactions">BootstrapActions</a>:
    - <em class="replaceable"><code>Bootstrap Actions</code></em>
  <a href="aws-resource-emr-cluster.html#cfn-emr-cluster-configurations">Configurations</a>:
    - <em class="replaceable"><code>Configurations</code></em>        
  <a href="aws-resource-emr-cluster.html#cfn-elasticmapreduce-cluster-customamiid">CustomAmiId</a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-emr-cluster.html#cfn-elasticmapreduce-cluster-ebsrootvolumesize">EbsRootVolumeSize</a>: <em class="replaceable"><code>Integer</code></em>
  <a href="aws-resource-emr-cluster.html#cfn-emr-cluster-instances">Instances</a>:
    <em class="replaceable"><code>JobFlowInstancesConfig</code></em>
  <a href="aws-resource-emr-cluster.html#cfn-emr-cluster-jobflowrole">JobFlowRole</a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-emr-cluster.html#cfn-elasticmapreduce-cluster-kerberosattributes">KerberosAttributes</a>&quot; : 
    <em class="replaceable"><code><a href="aws-properties-elasticmapreduce-cluster-kerberosattributes.html">Amazon EMR Cluster
            KerberosAttributes</a></code></em>
  <a href="aws-resource-emr-cluster.html#cfn-emr-cluster-loguri">LogUri</a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-emr-cluster.html#cfn-emr-cluster-name">Name</a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-emr-cluster.html#cfn-emr-cluster-releaselabel">ReleaseLabel</a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-emr-cluster.html#cfn-emr-cluster-scaledownbehavior">ScaleDownBehavior</a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-emr-cluster.html#cfn-emr-cluster-securityconfiguration">SecurityConfiguration</a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-emr-cluster.html#cfn-emr-cluster-servicerole">ServiceRole</a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-emr-cluster.html#cfn-emr-cluster-tags">Tags</a>:
    - <em class="replaceable"><code>Resource Tag</code></em>
  <a href="aws-resource-emr-cluster.html#cfn-emr-cluster-visibletoallusers">VisibleToAllUsers</a>: <em class="replaceable"><code>Boolean</code></em>
</code></pre>
                        </div><h2 id="w2ab1c21c10d679b9">Properties</h2><div class="aws-note">
                        <p class="aws-note">Note</p>
                        <p>For more information about the constraints and valid values of each property, see
                           the <a href="https://docs.aws.amazon.com/ElasticMapReduce/latest/API/API_Cluster.html" target="_blank">
                              Cluster</a> data type in the <em>Amazon EMR API Reference</em>.
                        </p>
                     </div><div class="variablelist">
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <dl>
                           
                           <dt><a id="cfn-emr-cluster-additionalinfo"></a><span class="term"><code class="code">AdditionalInfo</code></span></dt>
                           
                           <dd>
                              
                              <p>(Intended for advanced uses only.) Additional features that you want to select. This
                                 is meta information about third-party applications that third-party vendors use for
                                 testing purposes.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: JSON object
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-emr-cluster-applications"></a><span class="term"><code class="code">Applications</code></span></dt>
                           
                           <dd>
                              
                              <p>The software applications to deploy on the cluster, and the arguments that Amazon
                                 EMR
                                 passes to those applications.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: List of <a href="aws-properties-emr-cluster-application.html">Amazon EMR Cluster Application</a> property types
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-emr-cluster-autoscalingrole"></a><span class="term"><code class="code">AutoScalingRole</code></span></dt>
                           
                           <dd>
                              
                              <p>An AWS Identity and Access Management (IAM) role for automatic scaling policies. The
                                 default role is <code class="code">EMR_AutoScaling_DefaultRole</code>. The IAM 
                                 role provides permissions that the automatic scaling feature requires to launch and
                                 terminate Amazon EC2 instances in an instance group.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-emr-cluster-bootstrapactions"></a><span class="term"><code class="code">BootstrapActions</code></span></dt>
                           
                           <dd>
                              
                              <p>A list of bootstrap actions that Amazon EMR runs before starting applications on the
                                 cluster.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: List of <a href="aws-properties-emr-cluster-bootstrapactionconfig.html">Amazon EMR Cluster
                                    BootstrapActionConfig</a> property
                                 types
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-emr-cluster-configurations"></a><span class="term"><code class="code">Configurations</code></span></dt>
                           
                           <dd>
                              
                              <p>The software configuration of the Amazon EMR cluster.</p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: List of <a href="aws-properties-emr-cluster-configuration.html">Amazon EMR Cluster
                                    Configurations</a> property types
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-elasticmapreduce-cluster-customamiid"></a><span class="term"><code class="code">CustomAmiId</code></span></dt>
                           
                           <dd>
                              
                              <p>A custom Amazon Linux AMI for the cluster (instead of an EMR-owned AMI). For more
                                 information, see <a href="https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-custom-ami.html" target="_blank">Using a Custom
                                    AMI</a> in the <em>Amazon EMR Management Guide</em>.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                              <p><em>Example</em>: <code class="code">&quot;CustomAmiId&quot; : &quot;ami-7fb3bc69&quot;</code></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-elasticmapreduce-cluster-ebsrootvolumesize"></a><span class="term"><code class="code">EbsRootVolumeSize</code></span></dt>
                           
                           <dd>
                              
                              <p>The
                                 size, in GiB, of the EBS root device volume of the Linux AMI that&apos;s used for each
                                 EC2
                                 instance.
                              </p>
                              
                              <p>Currently, AWS CloudFormation supports only Amazon EMR 4.0 and later software releases.</p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: Integer
                              </p>
                              
                              <p><em>Update requires</em>: 
                                 <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-emr-cluster-instances"></a><span class="term"><code class="code">Instances</code></span></dt>
                           
                           <dd>
                              
                              <p>Configures the EC2 instances that run jobs in the Amazon EMR cluster.</p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              
                              <p><em>Type</em>: <a href="aws-properties-emr-cluster-jobflowinstancesconfig.html">Amazon EMR Cluster
                                    JobFlowInstancesConfig</a></p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-some-interrupt">Some interruptions</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-emr-cluster-jobflowrole"></a><span class="term"><code class="code">JobFlowRole</code></span></dt>
                           
                           <dd>
                              
                              <p>(Also called <em>instance profile</em> and <em>EC2
                                    role</em>.) Accepts an instance profile that&apos;s associated with the role that you
                                 want to use. All EC2 instances in the cluster assume this role. For more information,
                                 see <a href="https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-iam-roles-creatingroles.html" target="_blank">Create and Use IAM Roles for Amazon EMR</a> in the
                                 <em>Amazon EMR Management Guide</em>.
                              </p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-elasticmapreduce-cluster-kerberosattributes"></a><span class="term"><code class="code">KerberosAttributes</code></span></dt>
                           
                           <dd>
                              
                              <p>Attributes for Kerberos configuration when Kerberos authentication is enabled using
                                 a security configuration.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: <a href="aws-properties-elasticmapreduce-cluster-kerberosattributes.html">Amazon EMR Cluster
                                    KerberosAttributes</a></p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-emr-cluster-loguri"></a><span class="term"><code class="code">LogUri</code></span></dt>
                           
                           <dd>
                              
                              <p>An S3 bucket location that Amazon EMR writes logs files to from a job flow. If you
                                 don&apos;t
                                 specify a value, Amazon EMR doesn&apos;t write any log files.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-emr-cluster-name"></a><span class="term"><code class="code">Name</code></span></dt>
                           
                           <dd>
                              
                              <p>A name for the Amazon EMR cluster.</p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-emr-cluster-releaselabel"></a><span class="term"><code class="code">ReleaseLabel</code></span></dt>
                           
                           <dd>
                              
                              <p>The Amazon EMR software release label. A release is a set of software applications
                                 and
                                 components that you can install and configure on an Amazon EMR cluster. For more information,
                                 see <a href="https://docs.aws.amazon.com//ElasticMapReduce/latest/ReleaseGuide/emr-release-components.html" target="_blank">About Amazon EMR Releases</a> in the <em>Amazon EMR Release
                                    Guide</em>.
                              </p>
                              
                              <p>Currently, AWS CloudFormation supports only Amazon EMR 4.0 and later software releases.</p>
                              
                              <p><em>Required</em>: Conditional. If you specify the <code class="code">Applications</code> property, you must specify this property.
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-emr-cluster-scaledownbehavior"></a><span class="term"><code class="code">ScaleDownBehavior</code></span></dt>
                           
                           <dd>
                              
                              <p>Indicates how individual EC2 instances terminate when an automatic scale-in activity
                                 occurs or an instance group is resized. For more information, see <a href="https://docs.aws.amazon.com//ElasticMapReduce/latest/API/API_Cluster.html" target="_blank">Cluster</a> in
                                 the Amazon EMR API Reference.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-emr-cluster-securityconfiguration"></a><span class="term"><code class="code">SecurityConfiguration</code></span></dt>
                           
                           <dd>
                              
                              <p>The name of the security configuration that&apos;s applied to the cluster.</p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-emr-cluster-servicerole"></a><span class="term"><code class="code">ServiceRole</code></span></dt>
                           
                           <dd>
                              
                              <p>The IAM role that Amazon EMR assumes to access AWS resources on your behalf. For more
                                 information, see <a href="https://docs.aws.amazon.com//ElasticMapReduce/latest/ManagementGuide/emr-iam-roles.html" target="_blank">Configure IAM Roles for Amazon EMR</a> in the <em>Amazon EMR Management
                                    Guide</em>.
                              </p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-emr-cluster-tags"></a><span class="term"><code class="code">Tags</code></span></dt>
                           
                           <dd>
                              
                              <p>An arbitrary set of tags (key&#x2013;value pairs) to help you identify the Amazon EMR
                                 cluster.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: <a href="aws-properties-resource-tags.html">AWS CloudFormation Resource Tags</a></p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-emr-cluster-visibletoallusers"></a><span class="term"><code class="code">VisibleToAllUsers</code></span></dt>
                           
                           <dd>
                              
                              <p>Indicates whether the instances in the cluster are visible to all IAM users in the
                                 AWS account. If you specify <code class="code">true</code>, all IAM users can view and (if they
                                 have permissions) manage the instances. If you specify <code class="code">false</code>, only the
                                 IAM user that created the cluster can view and manage it.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: Boolean
                              </p>
                              
                              <p><em>Update requires</em>: <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                              <p><em>Default value</em>: <code class="code">false</code></p>
                              
                           </dd>
                           
                        </dl>
                     </div><h2 id="aws-resource-emr-cluster-returnvalues">Return Values</h2><h3 id="aws-resource-emr-cluster-ref">Ref</h3><p>When the logical ID of this resource is provided to the <code class="code">Ref</code>
                        intrinsic function, <code class="code">Ref</code> returns the cluster ID, such as
                        <code class="code">j-1ABCD123AB1A</code>.
                     </p><p>For more information about using the <code class="code">Ref</code> function, see <a href="intrinsic-function-reference-ref.html">Ref</a>.
                     </p><h3 id="aws-resource-emr-cluster-getatt">Fn::GetAtt</h3><p><code class="code">Fn::GetAtt</code> returns a value for a specified attribute of this type.
                        The following are the available attributes and sample return values.
                     </p><div class="variablelist">
                        
                        
                        <dl>
                           
                           <dt><span class="term"><code class="code">MasterPublicDNS</code></span></dt>
                           
                           <dd>
                              
                              <p>The public DNS name of the master node (instance), such as
                                 <code class="code">ec2-12-123-123-123.us-west-2.compute.amazonaws.com</code>.
                              </p>
                              
                           </dd>
                           
                        </dl>
                     </div><p>For more information about using <code class="code">Fn::GetAtt</code>, see <a href="intrinsic-function-reference-getatt.html">Fn::GetAtt</a>.
                     </p><h2 id="aws-resource-emr-cluster-examples">Examples</h2><h3 id="aws-resource-emr-cluster-example1">Create a Cluster with Two Core Nodes</h3><p>The following example creates an Amazon EMR cluster with one master node and two core
                        nodes.
                        The specified IAM roles are the default roles provided by Amazon EMR. The example
                        also assumes
                        that the cluster is launched in an AWS Region with a default VPC and subnet. If you
                        don&apos;t
                        have these, use the <a href="aws-properties-emr-cluster-jobflowinstancesconfig.html">Ec2SubnetId</a> property to specify the VPC and subnet for the cluster.
                        Otherwise, AWS CloudFormation can&apos;t launch the cluster and returns the following status
                        message:
                        <code class="code">ElasticMapReduce Cluster failed to stabilize</code>. 
                     </p><div id="JSON" name="JSON" class="section langfilter">
                        <h4 id="aws-resource-emr-cluster-example1.json">JSON</h4>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">&quot;TestCluster&quot;: {
  &quot;Type&quot;: &quot;AWS::EMR::Cluster&quot;,
  &quot;Properties&quot;: {
    &quot;Instances&quot;: {
      &quot;MasterInstanceGroup&quot;: {
        &quot;InstanceCount&quot;: 1,
        &quot;InstanceType&quot;: &quot;m3.xlarge&quot;,
        &quot;Market&quot;: &quot;ON_DEMAND&quot;,
        &quot;Name&quot;: &quot;Master&quot;
      },
      &quot;CoreInstanceGroup&quot;: {
        &quot;InstanceCount&quot;: 2,
        &quot;InstanceType&quot;: &quot;m3.xlarge&quot;,
        &quot;Market&quot;: &quot;ON_DEMAND&quot;,
        &quot;Name&quot;: &quot;Core&quot;
      },
      &quot;TerminationProtected&quot; : true
    },
    &quot;Name&quot;: &quot;TestCluster&quot;,
    &quot;JobFlowRole&quot;: &quot;EMR_EC2_DefaultRole&quot;,
    &quot;ServiceRole&quot;: &quot;EMR_DefaultRole&quot;,
    &quot;ReleaseLabel&quot;: &quot;emr-4.2.0&quot;,
    &quot;Tags&quot;: [
      {
        &quot;Key&quot;: &quot;IsTest&quot;,
        &quot;Value&quot;: &quot;True&quot;
      }
    ]
  }
}</code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        <h4 id="aws-resource-emr-cluster-example1.yaml">YAML</h4>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">TestCluster: 
  Type: AWS::EMR::Cluster
  Properties: 
    Instances: 
      MasterInstanceGroup: 
        InstanceCount: 1
        InstanceType: &quot;m3.xlarge&quot;
        Market: &quot;ON_DEMAND&quot;
        Name: &quot;Master&quot;
      CoreInstanceGroup: 
        InstanceCount: 2
        InstanceType: &quot;m3.xlarge&quot;
        Market: &quot;ON_DEMAND&quot;
        Name: &quot;Core&quot;
      TerminationProtected: true
    Name: &quot;TestCluster&quot;
    JobFlowRole: &quot;EMR_EC2_DefaultRole&quot;
    ServiceRole: &quot;EMR_DefaultRole&quot;
    ReleaseLabel: &quot;emr-4.2.0&quot;
    Tags: 
      - 
        Key: &quot;IsTest&quot;
        Value: &quot;True&quot;
</code></pre>
                        </div><h3 id="aws-resource-emr-cluster-example2">Create a Cluster with a Bootstrap Action</h3><p>The following example creates an Amazon EMR cluster with a bootstrap action.</p><div id="JSON" name="JSON" class="section langfilter">
                        <h4 id="aws-resource-emr-cluster-example2.json">JSON</h4>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">&quot;TestCluster&quot;: {
  &quot;Type&quot;: &quot;AWS::EMR::Cluster&quot;,
  &quot;Properties&quot;: {
    &quot;BootstrapActions&quot;: [{
      &quot;Name&quot;: &quot;SomeBootStrapAction&quot;,
      &quot;ScriptBootstrapAction&quot;: {
        &quot;Path&quot;: &quot;/path/to/s3&quot;
      }
    }],
    &quot;Instances&quot;: {
      &quot;MasterInstanceGroup&quot;: {
        &quot;InstanceCount&quot;: 1,
        &quot;InstanceType&quot;: &quot;m3.xlarge&quot;,
        &quot;Market&quot;: &quot;ON_DEMAND&quot;,
        &quot;Name&quot;: &quot;Master&quot;
      },
      &quot;CoreInstanceGroup&quot;: {
        &quot;InstanceCount&quot;: 2,
        &quot;InstanceType&quot;: &quot;m3.xlarge&quot;,
        &quot;Market&quot;: &quot;ON_DEMAND&quot;,
        &quot;Name&quot;: &quot;Core&quot;
      },
      &quot;TerminationProtected&quot;: true
    },
    &quot;Name&quot;: &quot;TestCluster&quot;,
    &quot;JobFlowRole&quot;: &quot;EMR_EC2_DefaultRole&quot;,
    &quot;ScaleDownBehavior&quot;: &quot;TERMINATE_AT_TASK_COMPLETION&quot;,
    &quot;ServiceRole&quot;: &quot;EMR_DefaultRole&quot;,
    &quot;ReleaseLabel&quot;: &quot;emr-4.2.0&quot;,
    &quot;Tags&quot;: [
      {
        &quot;Key&quot;: &quot;IsTest&quot;,
        &quot;Value&quot;: &quot;True&quot;
      }
    ]
  }
}</code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        <h4 id="aws-resource-emr-cluster-example2.yaml">YAML</h4>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">TestCluster: 
  Type: AWS::EMR::Cluster
  Properties: 
    BootstrapActions: 
      - 
        Name: &quot;SomeBootStrapAction&quot;
        ScriptBootstrapAction: 
          Path: &quot;/path/to/s3&quot;
    Instances: 
      MasterInstanceGroup: 
        InstanceCount: 1
        InstanceType: &quot;m3.xlarge&quot;
        Market: &quot;ON_DEMAND&quot;
        Name: &quot;Master&quot;
      CoreInstanceGroup: 
        InstanceCount: 2
        InstanceType: &quot;m3.xlarge&quot;
        Market: &quot;ON_DEMAND&quot;
        Name: &quot;Core&quot;
      TerminationProtected: true
    Name: &quot;TestCluster&quot;
    JobFlowRole: &quot;EMR_EC2_DefaultRole&quot;
    ScaleDownBehavior: &quot;TERMINATE_AT_TASK_COMPLETION&quot;
    ServiceRole: &quot;EMR_DefaultRole&quot;
    ReleaseLabel: &quot;emr-4.2.0&quot;
    Tags: 
      - 
        Key: &quot;IsTest&quot;
        Value: &quot;True&quot;
</code></pre>
                        </div><h3 id="aws-resource-emr-cluster-example3">Create a Cluster with a Custom AMI</h3><p>The following example template  a custom Amazon Linux AMI when creating an Amazon
                        EMR
                        cluster.
                     </p><div id="JSON" name="JSON" class="section langfilter">
                        
                        <h4 id="aws-resource-emr-cluster-example3.json">JSON</h4>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">{
  &quot;AWSTemplateFormatVersion&quot;: &quot;2010-09-09&quot;,
  &quot;Parameters&quot; : {
    &quot;CustomAmiId&quot; : {
      &quot;Type&quot; : &quot;String&quot;
    },
    &quot;InstanceType&quot; : {
      &quot;Type&quot; : &quot;String&quot;
    },
    &quot;ReleaseLabel&quot; : {
      &quot;Type&quot; : &quot;String&quot;
    },
    &quot;SubnetId&quot; : {
      &quot;Type&quot; : &quot;String&quot;
    },
    &quot;TerminationProtected&quot; : {
      &quot;Type&quot; : &quot;String&quot;,
      &quot;Default&quot; : &quot;false&quot;
    },
    &quot;ElasticMapReducePrincipal&quot; : {
      &quot;Type&quot; : &quot;String&quot;
    },
    &quot;Ec2Principal&quot; : {
      &quot;Type&quot; : &quot;String&quot;
    }
  },
  &quot;Resources&quot;: {
    &quot;cluster&quot;: {
      &quot;Type&quot;: &quot;AWS::EMR::Cluster&quot;,
      &quot;Properties&quot;: {
        &quot;CustomAmiId&quot; : {&quot;Ref&quot; : &quot;CustomAmiId&quot;},
        &quot;Instances&quot;: {
          &quot;MasterInstanceGroup&quot;: {
            &quot;InstanceCount&quot;: 1,
            &quot;InstanceType&quot;: {&quot;Ref&quot; : &quot;InstanceType&quot;},
            &quot;Market&quot;: &quot;ON_DEMAND&quot;,
            &quot;Name&quot;: &quot;cfnMaster&quot;
          },
          &quot;CoreInstanceGroup&quot;: {
            &quot;InstanceCount&quot;: 1,
            &quot;InstanceType&quot;: {&quot;Ref&quot; : &quot;InstanceType&quot;},
            &quot;Market&quot;: &quot;ON_DEMAND&quot;,
            &quot;Name&quot;: &quot;cfnCore&quot;
          },
          &quot;TerminationProtected&quot; : {&quot;Ref&quot; : &quot;TerminationProtected&quot;},
          &quot;Ec2SubnetId&quot; : {&quot;Ref&quot; : &quot;SubnetId&quot;}
        },
        &quot;Name&quot;: &quot;CFNtest&quot;,
        &quot;JobFlowRole&quot; : {&quot;Ref&quot;: &quot;emrEc2InstanceProfile&quot;},
        &quot;ServiceRole&quot; : {&quot;Ref&quot;: &quot;emrRole&quot;},
        &quot;ReleaseLabel&quot; : {&quot;Ref&quot; : &quot;ReleaseLabel&quot;},
        &quot;VisibleToAllUsers&quot; : true,
        &quot;Tags&quot;: [
          {
            &quot;Key&quot;: &quot;key1&quot;,
            &quot;Value&quot;: &quot;value1&quot;
          }
        ]
      }
    },
    &quot;emrRole&quot;: {
      &quot;Type&quot;: &quot;AWS::IAM::Role&quot;,
      &quot;Properties&quot;: {
        &quot;AssumeRolePolicyDocument&quot;: {
          &quot;Version&quot;: &quot;2008-10-17&quot;,
          &quot;Statement&quot;: [
            {
              &quot;Sid&quot;: &quot;&quot;,
              &quot;Effect&quot;: &quot;Allow&quot;,
              &quot;Principal&quot;: {
                &quot;Service&quot;: {&quot;Ref&quot; : &quot;ElasticMapReducePrincipal&quot;}
              },
              &quot;Action&quot;: &quot;sts:AssumeRole&quot;
            }
          ]
        },
        &quot;Path&quot;: &quot;/&quot;,
        &quot;ManagedPolicyArns&quot;: [&quot;arn:aws:iam::aws:policy/service-role/AmazonElasticMapReduceRole&quot;]
      }
    },
    &quot;emrEc2Role&quot;: {
      &quot;Type&quot;: &quot;AWS::IAM::Role&quot;,
      &quot;Properties&quot;: {
        &quot;AssumeRolePolicyDocument&quot;: {
          &quot;Version&quot;: &quot;2008-10-17&quot;,
          &quot;Statement&quot;: [
            {
              &quot;Sid&quot;: &quot;&quot;,
              &quot;Effect&quot;: &quot;Allow&quot;,
              &quot;Principal&quot;: {
                &quot;Service&quot;: {&quot;Ref&quot; : &quot;Ec2Principal&quot;}
              },
              &quot;Action&quot;: &quot;sts:AssumeRole&quot;
            }
          ]
        },
        &quot;Path&quot;: &quot;/&quot;,
        &quot;ManagedPolicyArns&quot;: [&quot;arn:aws:iam::aws:policy/service-role/AmazonElasticMapReduceforEC2Role&quot;]
      }
    },
    &quot;emrEc2InstanceProfile&quot;: {
      &quot;Type&quot;: &quot;AWS::IAM::InstanceProfile&quot;,
      &quot;Properties&quot;: {
        &quot;Path&quot;: &quot;/&quot;,
        &quot;Roles&quot;: [ {
          &quot;Ref&quot;: &quot;emrEc2Role&quot;
        } ]
      }
    }
  }
}</code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        
                        <h4 id="aws-resource-emr-cluster-example3.yaml">YAML</h4>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">AWSTemplateFormatVersion: 2010-09-09
Parameters:
  CustomAmiId:
    Type: String
  InstanceType:
    Type: String
  ReleaseLabel:
    Type: String
  SubnetId:
    Type: String
  TerminationProtected:
    Type: String
    Default: &apos;false&apos;
  ElasticMapReducePrincipal:
    Type: String
  Ec2Principal:
    Type: String
Resources:
  cluster:
    Type: AWS::EMR::Cluster
    Properties:
      CustomAmiId: !Ref CustomAmiId
      Instances:
        MasterInstanceGroup:
          InstanceCount: 1
          InstanceType: !Ref InstanceType
          Market: ON_DEMAND
          Name: cfnMaster
        CoreInstanceGroup:
          InstanceCount: 1
          InstanceType: !Ref InstanceType
          Market: ON_DEMAND
          Name: cfnCore
        TerminationProtected: !Ref TerminationProtected
        Ec2SubnetId: !Ref SubnetId
      Name: CFNtest
      JobFlowRole: !Ref emrEc2InstanceProfile
      ServiceRole: !Ref emrRole
      ReleaseLabel: !Ref ReleaseLabel
      VisibleToAllUsers: true
      Tags:
        - Key: key1
          Value: value1
  emrRole:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Version: 2008-10-17
        Statement:
          - Sid: &apos;&apos;
            Effect: Allow
            Principal:
              Service: !Ref ElasticMapReducePrincipal
            Action: &apos;sts:AssumeRole&apos;
      Path: /
      ManagedPolicyArns:
        - &apos;arn:aws:iam::aws:policy/service-role/AmazonElasticMapReduceRole&apos;
  emrEc2Role:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Version: 2008-10-17
        Statement:
          - Sid: &apos;&apos;
            Effect: Allow
            Principal:
              Service: !Ref Ec2Principal
            Action: &apos;sts:AssumeRole&apos;
      Path: /
      ManagedPolicyArns:
        - &apos;arn:aws:iam::aws:policy/service-role/AmazonElasticMapReduceforEC2Role&apos;
  emrEc2InstanceProfile:
    Type: AWS::IAM::InstanceProfile
    Properties:
      Path: /
      Roles:
        - !Ref emrEc2Role</code></pre>
                        </div><h3 id="aws-resource-emr-cluster-example4">Specify Root Volume Size</h3><p>The following example template enables you to specify the size of the EBS root volume
                        for an Amazon EMR cluster.
                     </p><div id="JSON" name="JSON" class="section langfilter">
                        
                        <h4 id="aws-resource-emr-cluster-example4.json">JSON</h4>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">{
  &quot;AWSTemplateFormatVersion&quot;: &quot;2010-09-09&quot;,
  &quot;Parameters&quot; : {
    &quot;InstanceType&quot; : {
      &quot;Type&quot; : &quot;String&quot;
    },
    &quot;ReleaseLabel&quot; : {
      &quot;Type&quot; : &quot;String&quot;
    },
    &quot;SubnetId&quot; : {
      &quot;Type&quot; : &quot;String&quot;
    },
    &quot;TerminationProtected&quot; : {
      &quot;Type&quot; : &quot;String&quot;,
      &quot;Default&quot; : &quot;false&quot;
    },
    &quot;EbsRootVolumeSize&quot; : {
      &quot;Type&quot; : &quot;String&quot;
    }
  },
  &quot;Resources&quot;: {
    &quot;cluster&quot;: {
      &quot;Type&quot;: &quot;AWS::EMR::Cluster&quot;,
      &quot;Properties&quot;: {
        &quot;EbsRootVolumeSize&quot; : {&quot;Ref&quot; : &quot;EbsRootVolumeSize&quot;},
        &quot;Instances&quot;: {
          &quot;MasterInstanceGroup&quot;: {
            &quot;InstanceCount&quot;: 1,
            &quot;InstanceType&quot;: {&quot;Ref&quot; : &quot;InstanceType&quot;},
            &quot;Market&quot;: &quot;ON_DEMAND&quot;,
            &quot;Name&quot;: &quot;cfnMaster&quot;
          },
          &quot;CoreInstanceGroup&quot;: {
            &quot;InstanceCount&quot;: 1,
            &quot;InstanceType&quot;: {&quot;Ref&quot; : &quot;InstanceType&quot;},
            &quot;Market&quot;: &quot;ON_DEMAND&quot;,
            &quot;Name&quot;: &quot;cfnCore&quot;
          },
          &quot;TerminationProtected&quot; : {&quot;Ref&quot; : &quot;TerminationProtected&quot;},
          &quot;Ec2SubnetId&quot; : {&quot;Ref&quot; : &quot;SubnetId&quot;}
        },
        &quot;Name&quot;: &quot;CFNtest&quot;,
        &quot;JobFlowRole&quot; : {&quot;Ref&quot;: &quot;emrEc2InstanceProfile&quot;},
        &quot;ServiceRole&quot; : {&quot;Ref&quot;: &quot;emrRole&quot;},
        &quot;ReleaseLabel&quot; : {&quot;Ref&quot; : &quot;ReleaseLabel&quot;},
        &quot;VisibleToAllUsers&quot; : true,
        &quot;Tags&quot;: [
          {
            &quot;Key&quot;: &quot;key1&quot;,
            &quot;Value&quot;: &quot;value1&quot;
          }
        ]
      }
    },
    &quot;emrRole&quot;: {
      &quot;Type&quot;: &quot;AWS::IAM::Role&quot;,
      &quot;Properties&quot;: {
        &quot;AssumeRolePolicyDocument&quot;: {
          &quot;Version&quot;: &quot;2008-10-17&quot;,
          &quot;Statement&quot;: [
            {
              &quot;Sid&quot;: &quot;&quot;,
              &quot;Effect&quot;: &quot;Allow&quot;,
              &quot;Principal&quot;: {
                &quot;Service&quot;: &quot;elasticmapreduce.amazonaws.com&quot;
              },
              &quot;Action&quot;: &quot;sts:AssumeRole&quot;
            }
          ]
        },
        &quot;Path&quot;: &quot;/&quot;,
        &quot;ManagedPolicyArns&quot;: [&quot;arn:aws:iam::aws:policy/service-role/AmazonElasticMapReduceRole&quot;]
      }
    },
    &quot;emrEc2Role&quot;: {
      &quot;Type&quot;: &quot;AWS::IAM::Role&quot;,
      &quot;Properties&quot;: {
        &quot;AssumeRolePolicyDocument&quot;: {
          &quot;Version&quot;: &quot;2008-10-17&quot;,
          &quot;Statement&quot;: [
            {
              &quot;Sid&quot;: &quot;&quot;,
              &quot;Effect&quot;: &quot;Allow&quot;,
              &quot;Principal&quot;: {
                &quot;Service&quot;: &quot;ec2.amazonaws.com&quot;
              },
              &quot;Action&quot;: &quot;sts:AssumeRole&quot;
            }
          ]
        },
        &quot;Path&quot;: &quot;/&quot;,
        &quot;ManagedPolicyArns&quot;: [&quot;arn:aws:iam::aws:policy/service-role/AmazonElasticMapReduceforEC2Role&quot;]
      }
    },
    &quot;emrEc2InstanceProfile&quot;: {
      &quot;Type&quot;: &quot;AWS::IAM::InstanceProfile&quot;,
      &quot;Properties&quot;: {
        &quot;Path&quot;: &quot;/&quot;,
        &quot;Roles&quot;: [ {
          &quot;Ref&quot;: &quot;emrEc2Role&quot;
        } ]
      }
    }
  }
}</code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        
                        <h4 id="aws-resource-emr-cluster-example4.yaml">YAML</h4>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">AWSTemplateFormatVersion: 2010-09-09
Parameters:
  InstanceType:
    Type: String
  ReleaseLabel:
    Type: String
  SubnetId:
    Type: String
  TerminationProtected:
    Type: String
    Default: &apos;false&apos;
  EbsRootVolumeSize:
    Type: String
Resources:
  cluster:
    Type: AWS::EMR::Cluster
    Properties:
      EbsRootVolumeSize: !Ref EbsRootVolumeSize
      Instances:
        MasterInstanceGroup:
          InstanceCount: 1
          InstanceType: !Ref InstanceType
          Market: ON_DEMAND
          Name: cfnMaster
        CoreInstanceGroup:
          InstanceCount: 1
          InstanceType: !Ref InstanceType
          Market: ON_DEMAND
          Name: cfnCore
        TerminationProtected: !Ref TerminationProtected
        Ec2SubnetId: !Ref SubnetId
      Name: CFNtest
      JobFlowRole: !Ref emrEc2InstanceProfile
      ServiceRole: !Ref emrRole
      ReleaseLabel: !Ref ReleaseLabel
      VisibleToAllUsers: true
      Tags:
        - Key: key1
          Value: value1
  emrRole:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Version: 2008-10-17
        Statement:
          - Sid: &apos;&apos;
            Effect: Allow
            Principal:
              Service: elasticmapreduce.amazonaws.com
            Action: &apos;sts:AssumeRole&apos;
      Path: /
      ManagedPolicyArns:
        - &apos;arn:aws:iam::aws:policy/service-role/AmazonElasticMapReduceRole&apos;
  emrEc2Role:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Version: 2008-10-17
        Statement:
          - Sid: &apos;&apos;
            Effect: Allow
            Principal:
              Service: ec2.amazonaws.com
            Action: &apos;sts:AssumeRole&apos;
      Path: /
      ManagedPolicyArns:
        - &apos;arn:aws:iam::aws:policy/service-role/AmazonElasticMapReduceforEC2Role&apos;
  emrEc2InstanceProfile:
    Type: AWS::IAM::InstanceProfile
    Properties:
      Path: /
      Roles:
        - !Ref emrEc2Role
</code></pre>
                        </div><h3 id="aws-resource-emr-cluster-example5">Create a Cluster with Kerberos Authentication</h3><p>The following example template enables you to specify the Kerberos authentication
                        configuration for an Amazon EMR cluster.
                     </p><div id="JSON" name="JSON" class="section langfilter">
                        
                        <h4 id="aws-resource-emr-cluster-example5.json">JSON</h4>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">{
  &quot;AWSTemplateFormatVersion&quot;: &quot;2010-09-09&quot;,
  &quot;Parameters&quot; : {
    &quot;CrossRealmTrustPrincipalPassword&quot; : {
      &quot;Type&quot; : &quot;String&quot;
    },
    &quot;KdcAdminPassword&quot; : {
      &quot;Type&quot; : &quot;String&quot;
    },
    &quot;Realm&quot; : {
      &quot;Type&quot; : &quot;String&quot;
    },
    &quot;InstanceType&quot; : {
      &quot;Type&quot; : &quot;String&quot;
    },
    &quot;ReleaseLabel&quot; : {
      &quot;Type&quot; : &quot;String&quot;
    },
    &quot;SubnetId&quot; : {
      &quot;Type&quot; : &quot;String&quot;
    }
  },
  &quot;Resources&quot;: {
    &quot;cluster&quot;: {
      &quot;Type&quot;: &quot;AWS::EMR::Cluster&quot;,
      &quot;Properties&quot;: {
        &quot;Instances&quot;: {
          &quot;MasterInstanceGroup&quot;: {
            &quot;InstanceCount&quot;: 1,
            &quot;InstanceType&quot;: {&quot;Ref&quot; : &quot;InstanceType&quot;},
            &quot;Market&quot;: &quot;ON_DEMAND&quot;,
            &quot;Name&quot;: &quot;cfnMaster&quot;
          },
          &quot;CoreInstanceGroup&quot;: {
            &quot;InstanceCount&quot;: 1,
            &quot;InstanceType&quot;: {&quot;Ref&quot; : &quot;InstanceType&quot;},
            &quot;Market&quot;: &quot;ON_DEMAND&quot;,
            &quot;Name&quot;: &quot;cfnCore&quot;
          },
          &quot;Ec2SubnetId&quot; : {&quot;Ref&quot; : &quot;SubnetId&quot;}
        },
        &quot;Name&quot;: &quot;CFNtest2&quot;,
        &quot;JobFlowRole&quot; : {&quot;Ref&quot;: &quot;emrEc2InstanceProfile&quot;},
        &quot;KerberosAttributes&quot; : {
          &quot;CrossRealmTrustPrincipalPassword&quot; : &quot;CfnIntegrationTest-1&quot;,
          &quot;KdcAdminPassword&quot; : &quot;CfnIntegrationTest-1&quot;,
          &quot;Realm&quot;: &quot;EC2.INTERNAL&quot;
        },
        &quot;ServiceRole&quot; : {&quot;Ref&quot;: &quot;emrRole&quot;},
        &quot;ReleaseLabel&quot; : {&quot;Ref&quot; : &quot;ReleaseLabel&quot;},
        &quot;SecurityConfiguration&quot; : {&quot;Ref&quot; : &quot;securityConfiguration&quot;},
        &quot;VisibleToAllUsers&quot; : true,
        &quot;Tags&quot;: [
          {
            &quot;Key&quot;: &quot;key1&quot;,
            &quot;Value&quot;: &quot;value1&quot;
          }
        ]
      }
    },
    &quot;key&quot; : {
      &quot;Type&quot; : &quot;AWS::KMS::Key&quot;,
      &quot;Properties&quot; : {
        &quot;KeyPolicy&quot; : {
          &quot;Version&quot;: &quot;2012-10-17&quot;,
          &quot;Id&quot;: &quot;key-default-1&quot;,
          &quot;Statement&quot;: [
            {
              &quot;Sid&quot;: &quot;Enable IAM User Permissions&quot;,
              &quot;Effect&quot;: &quot;Allow&quot;,
              &quot;Principal&quot;: {
                &quot;AWS&quot;: { &quot;Fn::GetAtt&quot; : [&quot;emrEc2Role&quot;, &quot;Arn&quot;]}
              },
              &quot;Action&quot;: &quot;kms:*&quot;,
              &quot;Resource&quot;: &quot;*&quot;
            },
            {
              &quot;Sid&quot;: &quot;Enable IAM User Permissions&quot;,
              &quot;Effect&quot;: &quot;Allow&quot;,
              &quot;Principal&quot;: {
                &quot;AWS&quot;: { &quot;Fn::Join&quot; : [&quot;&quot; , [&quot;arn:aws:iam::&quot;, {&quot;Ref&quot; : &quot;AWS::AccountId&quot;} ,&quot;:root&quot; ]] }
              },
              &quot;Action&quot;: &quot;kms:*&quot;,
              &quot;Resource&quot;: &quot;*&quot;
            }
          ]
        }
      }
    },
    &quot;securityConfiguration&quot;: {
      &quot;Type&quot; : &quot;AWS::EMR::SecurityConfiguration&quot;,
      &quot;Properties&quot; : {
        &quot;SecurityConfiguration&quot; : {
          &quot;AuthenticationConfiguration&quot;: {
            &quot;KerberosConfiguration&quot;: {
              &quot;Provider&quot;: &quot;ClusterDedicatedKdc&quot;,
              &quot;ClusterDedicatedKdcConfiguration&quot;: {
                &quot;TicketLifetimeInHours&quot;: 24,
                &quot;CrossRealmTrustConfiguration&quot;: {
                  &quot;Realm&quot;: &quot;AD.DOMAIN.COM&quot;,
                  &quot;Domain&quot;: &quot;ad.domain.com&quot;,
                  &quot;AdminServer&quot;: &quot;ad.domain.com&quot;,
                  &quot;KdcServer&quot;: &quot;ad.domain.com&quot;
                }
              }
            }
          }
        }
      }
    },
    &quot;emrRole&quot;: {
      &quot;Type&quot;: &quot;AWS::IAM::Role&quot;,
      &quot;Properties&quot;: {
        &quot;AssumeRolePolicyDocument&quot;: {
          &quot;Version&quot;: &quot;2008-10-17&quot;,
          &quot;Statement&quot;: [
            {
              &quot;Sid&quot;: &quot;&quot;,
              &quot;Effect&quot;: &quot;Allow&quot;,
              &quot;Principal&quot;: {
                &quot;Service&quot;: &quot;elasticmapreduce.amazonaws.com&quot;
              },
              &quot;Action&quot;: &quot;sts:AssumeRole&quot;
            }
          ]
        },
        &quot;Path&quot;: &quot;/&quot;,
        &quot;ManagedPolicyArns&quot;: [&quot;arn:aws:iam::aws:policy/service-role/AmazonElasticMapReduceRole&quot;]
      }
    },
    &quot;emrEc2Role&quot;: {
      &quot;Type&quot;: &quot;AWS::IAM::Role&quot;,
      &quot;Properties&quot;: {
        &quot;AssumeRolePolicyDocument&quot;: {
          &quot;Version&quot;: &quot;2008-10-17&quot;,
          &quot;Statement&quot;: [
            {
              &quot;Sid&quot;: &quot;&quot;,
              &quot;Effect&quot;: &quot;Allow&quot;,
              &quot;Principal&quot;: {
                &quot;Service&quot;: &quot;ec2.amazonaws.com&quot;
              },
              &quot;Action&quot;: &quot;sts:AssumeRole&quot;
            }
          ]
        },
        &quot;Path&quot;: &quot;/&quot;,
        &quot;ManagedPolicyArns&quot;: [&quot;arn:aws:iam::aws:policy/service-role/AmazonElasticMapReduceforEC2Role&quot;]
      }
    },
    &quot;emrEc2InstanceProfile&quot;: {
      &quot;Type&quot;: &quot;AWS::IAM::InstanceProfile&quot;,
      &quot;Properties&quot;: {
        &quot;Path&quot;: &quot;/&quot;,
        &quot;Roles&quot;: [ {
          &quot;Ref&quot;: &quot;emrEc2Role&quot;
        } ]
      }
    }
  },
  &quot;Outputs&quot; : {
    &quot;keyArn&quot; : {
      &quot;Value&quot; : {&quot;Fn::GetAtt&quot; : [&quot;key&quot;, &quot;Arn&quot;]}
    }
  }
}</code></pre>
                        </div><div id="YAML" name="YAML" class="section langfilter">
                        
                        <h4 id="aws-resource-emr-cluster-example5.yaml">YAML</h4>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">AWSTemplateFormatVersion: 2010-09-09
Parameters:
  CrossRealmTrustPrincipalPassword:
    Type: String
  KdcAdminPassword:
    Type: String
  Realm:
    Type: String
  InstanceType:
    Type: String
  ReleaseLabel:
    Type: String
  SubnetId:
    Type: String
Resources:
  cluster:
    Type: &apos;AWS::EMR::Cluster&apos;
    Properties:
      Instances:
        MasterInstanceGroup:
          InstanceCount: 1
          InstanceType: !Ref InstanceType
          Market: ON_DEMAND
          Name: cfnMaster
        CoreInstanceGroup:
          InstanceCount: 1
          InstanceType: !Ref InstanceType
          Market: ON_DEMAND
          Name: cfnCore
        Ec2SubnetId: !Ref SubnetId
      Name: CFNtest2
      JobFlowRole: !Ref emrEc2InstanceProfile
      KerberosAttributes:
        CrossRealmTrustPrincipalPassword: CfnIntegrationTest-1
        KdcAdminPassword: CfnIntegrationTest-1
        Realm: EC2.INTERNAL
      ServiceRole: !Ref emrRole
      ReleaseLabel: !Ref ReleaseLabel
      SecurityConfiguration: !Ref securityConfiguration
      VisibleToAllUsers: true
      Tags:
        - Key: key1
          Value: value1
  key:
    Type: &apos;AWS::KMS::Key&apos;
    Properties:
      KeyPolicy:
        Version: 2012-10-17
        Id: key-default-1
        Statement:
          - Sid: Enable IAM User Permissions
            Effect: Allow
            Principal:
              AWS: !GetAtt 
                - emrEc2Role
                - Arn
            Action: &apos;kms:*&apos;
            Resource: &apos;*&apos;
          - Sid: Enable IAM User Permissions
            Effect: Allow
            Principal:
              AWS: !Join 
                - &apos;&apos;
                - - &apos;arn:aws:iam::&apos;
                  - !Ref &apos;AWS::AccountId&apos;
                  - &apos;:root&apos;
            Action: &apos;kms:*&apos;
            Resource: &apos;*&apos;
  securityConfiguration:
    Type: &apos;AWS::EMR::SecurityConfiguration&apos;
    Properties:
      SecurityConfiguration:
        AuthenticationConfiguration:
          KerberosConfiguration:
            Provider: ClusterDedicatedKdc
            ClusterDedicatedKdcConfiguration:
              TicketLifetimeInHours: 24
              CrossRealmTrustConfiguration:
                Realm: AD.DOMAIN.COM
                Domain: ad.domain.com
                AdminServer: ad.domain.com
                KdcServer: ad.domain.com
  emrRole:
    Type: &apos;AWS::IAM::Role&apos;
    Properties:
      AssumeRolePolicyDocument:
        Version: 2008-10-17
        Statement:
          - Sid: &apos;&apos;
            Effect: Allow
            Principal:
              Service: elasticmapreduce.amazonaws.com
            Action: &apos;sts:AssumeRole&apos;
      Path: /
      ManagedPolicyArns:
        - &apos;arn:aws:iam::aws:policy/service-role/AmazonElasticMapReduceRole&apos;
  emrEc2Role:
    Type: &apos;AWS::IAM::Role&apos;
    Properties:
      AssumeRolePolicyDocument:
        Version: 2008-10-17
        Statement:
          - Sid: &apos;&apos;
            Effect: Allow
            Principal:
              Service: ec2.amazonaws.com
            Action: &apos;sts:AssumeRole&apos;
      Path: /
      ManagedPolicyArns:
        - &apos;arn:aws:iam::aws:policy/service-role/AmazonElasticMapReduceforEC2Role&apos;
  emrEc2InstanceProfile:
    Type: &apos;AWS::IAM::InstanceProfile&apos;
    Properties:
      Path: /
      Roles:
        - !Ref emrEc2Role
Outputs:
  keyArn:
    Value: !GetAtt 
      - key
      - Arn
</code></pre>
                        </div></div>
</body>
</html>